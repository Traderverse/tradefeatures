% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/volume.R
\name{add_obv}
\alias{add_obv}
\title{Add On-Balance Volume (OBV)}
\usage{
add_obv(data, name = "obv")
}
\arguments{
\item{data}{A data frame or market_tbl with price and volume data}

\item{name}{Character: name for new column (default: "obv")}
}
\value{
Data with new OBV column
}
\description{
Add OBV indicator. OBV uses volume flow to predict changes in stock price.
When the security closes higher than the previous close, all of the day's
volume is considered up-volume. When the security closes lower, all of the
day's volume is considered down-volume.
}
\examples{
\dontrun{
library(tradeio)

# Add OBV
prices <- fetch_prices("AAPL", from = "2024-01-01") |>
  add_obv()

# Check for divergence
library(dplyr)
prices |>
  add_obv() |>
  mutate(
    price_trend = close > lag(close, 10),
    obv_trend = obv > lag(obv, 10),
    bullish_divergence = !price_trend & obv_trend,
    bearish_divergence = price_trend & !obv_trend
  )
}
}
